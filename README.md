# ts-tinkerpop

A helper library for [Typescript](http://www.typescriptlang.org/) applications using
[TinkerPop 3](http://www.tinkerpop.com/) via [node-java](https://github.com/joeferner/node-java),
with a `java.d.ts` interface generated by [ts-java](https://github.com/RedSeal-co/ts-java).

## Usage

Import the `ts-tinkerpop` module, giving it a short name of your choice. Do this everywhere
you want to use functions from the `ts-tinkerpop` module.

```
import TP = require('ts-tinkerpop');
```

## Node-java Initialization

`ts-tinkerpop` takes advantage of a feature in `node-java` for coordinating application initialization and JVM creation. `ts-tinkerpop` registers itself on first import using the [java.registerClient](https://github.com/joeferner/node-java#javaRegisterClient) function. An application using `ts-tinkerpop` must therefore create the JVM using the corresponding [java.ensureJvm](https://github.com/joeferner/node-java#javaEnsureJvm) function. However, `ts-tinkerpop` wraps the `java.ensureJvm()` function in a method TP.getTinkerpop():

```
import TP = require('ts-tinkerpop');

TP.getTinkerpop().then(() => {
	// ts-tinkerpop and JVM ready to use here.
});
```

`ts-tinkerpop` uses [Bluebird](https://github.com/petkaantonov/bluebird) promises, and configures node-java for just sync functions, with no suffix, and promises, with the suffix 'P':

```
java.asyncOptions = {
  syncSuffix: '',
  promiseSuffix: 'P',
  promisify: BluePromise.promisify
};
```

## ts-tinkerpop functions

All of the `ts-tinkerpop` functions are in the one source file `lib/ts-tinkerpop.ts`. See the [groc](https://github.com/nevir/groc) generated documentation in `doc/lib/ts-tinkerpop.html`. See also the unit tests for examples: `test/tinkerpop-test.ts`.
